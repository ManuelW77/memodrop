{% extends "main.html" %}
{% load markdown_deux_tags %}
{% load area_rating %}
{% block title %}Braindump: {{ card.category }}{% endblock %}
{% block content %}
    <div id="braindump" class="col-lg-8 col-lg-offset-2">
        <h3>
            <div class="pull-right hidden-xs">
                <a href="{% url 'category-detail' card.category.pk %}" class="btn btn-default btn-sm" title="Go to the category">Go to Category</a>
            </div>
            {{ card.category.name }}
        </h3>
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">
                    Card #{{ card.pk }}
                    <div class="pull-right">
                        {% area_rating card.area %}
                    </div>
                </h3>
            </div>
            <div class="panel-body">
                {{ card.question|markdown }}
                {% if card.hint %}
                    <div id="hint">
                        <hr>
                        {{ card.hint|markdown }}
                    </div>
                {% endif %}
                <div id="answer">
                    <hr>
                    {{ card.answer|markdown }}
                </div>
            </div>
            <div class="panel-footer">
                <div class="row">
                    <div class="col-xs-6 col-lg-3">
                        {% if card.hint %}
                            <a href="#hint" id="show-hint" class="btn btn-info btn-block" title="Show a hint for this question">Hint</a>
                        {% else %}
                            <a href="#hint" id="show-hint-disabled" class="btn btn-info btn-block" disabled="disabled" title="Show a hint for this question">Hint</a>
                        {% endif %}
                    </div>
                    <div class="col-xs-6 col-lg-3">
                        <a href="#answer" id="show-answer" class="btn btn-primary btn-block" title="Show the answer for this question">Answer</a>
                    </div>
                    <div class="horizontal-spacer hidden-lg">&nbsp;</div>
                    <div class="col-xs-6 col-lg-3">
                        <a href="{% url 'braindump-ok' card.category.pk card.pk %}{{ braindump_ok_query_string }}" class="btn btn-success btn-block" title="Move this card to the next area">OK</a>
                    </div>
                    <div class="col-xs-6 col-lg-3">
                        <a href="{% url 'braindump-nok' card.category.pk card.pk %}{{ braindump_nok_query_string }}" class="btn btn-danger btn-block" title="{% if card.category.mode == 1 %}Move this card to area 1{% elif card.category.mode == 2 %}Move this card to the previous area{% endif %}">Not OK</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12">
                <div class="pull-right">
                    <div class="btn-group">
                        <a href="{% url 'braindump-session' card.category.pk %}{{ braindump_try_again_query_string }}" id="next" class="btn btn-default btn-sm" title="Choose another card">Try again</a>
                        <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown"
                                aria-haspopup="true" aria-expanded="false">
                            <span class="caret"></span>
                            <span class="sr-only">Toggle Dropdown</span>
                        </button>
                        <ul class="dropdown-menu">
                            <li><a href="{% url 'card-update' card.pk %}" title="Edit this card">Update</a></li>
                            <li><a href="{% url 'card-delete' card.pk %}" title="Delete this card">Delete</a></li>
                            <li role="separator" class="divider"></li>
                            <li><a href="{% url 'category-detail' card.category.pk %}" title="Go to the category">Go to Category</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
